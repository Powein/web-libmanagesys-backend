<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.powei.testmybatis.mapper.ReaderMapper">
    <update id="update">
        <if test="readerId != null">
            update user set
            <if test="borrowingCount != null">
                borrowing_count = #{borrowingCount},
            </if>
            <if test="name != null">
                name = #{name},
            </if>
            <if test="expireDate != null">
                expire_date = #{expireDate},
            </if>
            <if test="typeId != null">
                typeid = #{typeId},
            </if>
            <if test="email != null">
                email = #{email},
            </if>
            readerid = #{readerId}
            where readerid = #{readerId}
        </if>
    </update>

    <select id="query">
        select readerid as readerId, borrowing_count as borrowingCount, name as name, email as email, expire_date as expireDate, typeid as typeId from user where 1 = 1
            <if test="borrowingCount != null">
                and borrowing_count = #{borrowingCount}
            </if>
            <if test="name != null">
                and name = #{name}
            </if>
            <if test="expireDate != null">
                and expire_date = #{expireDate}
            </if>
            <if test="typeId != null">
                and typeid = #{typeId}
            </if>
            <if test="email != null">
                and email = #{email}
            </if>
            <if test="readerId != null">
                and readerid = #{readerId}
            </if>
    </select>
</mapper>